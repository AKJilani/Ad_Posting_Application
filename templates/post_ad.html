{% extends 'base.html' %}
{% block title %}Post an Ad{% endblock %}
{% block content %}
<h2>Post a New Ad</h2>
<form method="POST" class="mx-auto">
    <div class="d-flex flex-wrap gap-3 mb-2">
        {% for label, name, type in [
            ('Building No:', 'building_no', 'text'),
            ('Apartment Type:', 'Apartment_Type', 'text'),
            ('Apartment Number:', 'Apartment_Number', 'text'),
            ('Bedrooms:', 'Bedrooms', 'number'),
            ('Bathrooms:', 'Bathrooms', 'number'),
            ('Parking Facility:', 'Parking_Facility', 'text'),
            ('Tenant Type:', 'Tenant_Type', 'text'),
            ('Security:', 'Security', 'text'),
            ('Water:', 'Water', 'text'),
            ('Available From:', 'Available_From_Date', 'date'),
            ('Rent Per Month:', 'Rent_Per_Month', 'number'),
            ('Advance Payment:', 'Advance_Payment', 'number'),
            ('Phone Number:', 'Phone_Number', 'tel'),
            ('Address:', 'Address', 'text')
        ] %}
        <div class="flex-grow-1" style="min-width: 200px; max-width: 300px;">
            <label class="form-label">{{ label }}</label>
            <input type="{{ type }}" name="{{ name }}" class="form-control" required
                   value="{{ ad[name] if ad else '' }}">
        </div>
        {% endfor %}
    </div>

    <div class="d-flex flex-wrap gap-3 mb-4">
        <div class="flex-grow-1" style="min-width: 300px;">
            <label class="form-label">Restrictions:</label>
            <textarea name="Restrictions" class="form-control" rows="4" required>{{ ad.Restrictions if ad else '' }}</textarea>
        </div>
        <div class="flex-grow-1" style="min-width: 300px;">
            <label class="form-label">Description:</label>
            <textarea name="Description" class="form-control" rows="4" required>{{ ad.Description if ad else '' }}</textarea>
        </div>
    </div>

    <div class="d-flex justify-content-center gap-3 mt-4">
        <button type="submit" class="btn btn-success px-4 py-2">
            {{ 'Update Ad' if ad else 'Post Ad' }}
        </button>
    </div>
</form>

{% if ad %}
<!-- Action buttons must be outside the form -->
<div class="d-flex justify-content-center gap-3 mt-3">
    <form method="POST" action="/delete_ad_apartment/{{ ad.Id }}" onsubmit="return confirm('Are you sure?')">
        <button type="submit" class="btn btn-danger">Delete Ad</button>
    </form>
    <a href="/update_ad_apartment/{{ ad.Id }}" class="btn btn-primary">Update Ad</a>
</div>
{% endif %}
{% endblock %}
