{% extends 'base.html' %}
{% block title %}
Apartments for Rent
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ad_apartment.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{% endblock %}

{% block content %}
<a href="/post_ad" class="btn btn-primary mb-3">Post New Ad</a>
{% for ad in ads %}
<div class="listings-container">
    <!-- Apartment Card 1 -->
    <div class="apartment-card">
        <div class="card-header">
            <span class="availability-badge">Available Now</span>
            <h2 class="card-title" style="margin-bottom: 5px;">Apartment for Rent</h2>
            <div class="full-address">
                <i class="fas fa-map-marker-alt"></i> {{ ad.Address }}
            </div>
        </div>

        <div class="card-highlights">
            <div class="card-price">
                <span class="price-amount">{{ ad.Rent_Per_Month }}</span>
                <span class="price-period">/month</span>
            </div>

            <div class="quick-features">
                <span><i class="fas fa-bed"></i>{{ ad.Bedrooms }}</span>
                <span><i class="fas fa-bath"></i>{{ ad.Bathrooms }}</span>
                <span><i class="fas fa-parking" style="margin-top: 2.5px;"></i>Parking: {{ ad.Parking }}</span>
            </div>
        </div>

        <div class="card-actions">
            <a class="call-btn" href="tel:{{ ad.Phone_Number }}">
                <i class="fas fa-phone"></i> {{ ad.Phone_Number }}
            </a>
            <button class="details-btn" onclick="toggleDetails(this)">
                <i class="fas fa-info-circle"></i> See Details
            </button>
        </div>

        <div class="card-details" style="display: none;">
            <div class="details-grid">
                <div class="detail-item">
                    <span class="detail-label">Building: </span>
                    <span>{{ ad.Building_Number }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Apartment: </span>
                    <span>{{ ad.Apartment_Number }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Available:</span>
                    <span>{{ ad.Available_From_Date }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Advance:</span>
                    <span>{{ ad.Advance_Payment }}</span>
                </div>
            </div>

            <div class="features-list">
                <div class="feature-item"><i class="fas fa-users"></i>{{ ad.Tenant_Type }}</div>
                <div class="feature-item"><i class="fas fa-shield-alt"></i>{{ ad.Security }}</div>
                    <div class="feature-item"><i class="fas fa-water"></i>{{ ad.Water }}</div>
                </div>

                <div class="full-description">
                    <h6>Restrictions</h6 >
                    <p>{{ ad.Restrictions }}</p>
                </div>

                <div class="full-description">
                    <h5>Description</h5>
                    <p>{{ ad.Description }}</p>
                </div>
            </div>
        </div>

    </div>
    {% endfor %}
    {% if not ads %}
    <div class="no-ads-message">
        <h3>No Ads Available</h3>
        <p>It seems there are no ads available at the moment. Please check back later or post a new ad.</p>
    </div>
    {% endif %}

    {% block js %}
    <script>
        function toggleDetails(button) {
            const detailsSection = button.closest('.apartment-card').querySelector('.card-details');
            if (detailsSection.style.display === 'none') {
                detailsSection.style.display = 'block';
                button.innerHTML = '<i class="fas fa-chevron-up"></i> Hide Details';
            } else {
                detailsSection.style.display = 'none';
                button.innerHTML = '<i class="fas fa-info-circle"></i> Details';
            }
        }
    </script>
    {% endblock %}
    {% endblock %}